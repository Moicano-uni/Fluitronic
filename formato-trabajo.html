<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formato de Trabajo T√©cnico</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            line-height: 1.4;
        }
        
        .nav-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
        }
        
        .back-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 10px;
            text-decoration: none;
            display: inline-block;
        }
        
        .back-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .header-section {
            margin-bottom: 30px;
        }
        
        .header-field {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .header-field label {
            font-weight: bold;
            min-width: 120px;
        }
        
        .header-input {
            flex-grow: 1;
            margin-left: 10px;
            border: none;
            border-bottom: 1px solid #000;
            padding: 5px 0;
            font-size: 14px;
            outline: none;
            background: transparent;
        }
        
        .header-input:focus {
            border-bottom: 2px solid #0066cc;
        }
        
        .section-title {
            background-color: #f0f0f0;
            padding: 8px;
            margin: 25px 0 10px 0;
            font-weight: bold;
            text-align: center;
            border: 1px solid #ccc;
            font-size: 14px;
        }
        
        .work-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
        }
        
        .work-table th {
            border: 1px solid #000;
            padding: 8px;
            background-color: #f5f5f5;
            font-weight: bold;
            text-align: center;
            font-size: 12px;
        }
        
        .work-table td {
            border: 1px solid #000;
            padding: 5px;
            vertical-align: top;
        }
        
        .activity-col {
            width: 40%;
        }
        
        .check-col {
            width: 8%;
            text-align: center;
        }
        
        .obs-col {
            width: 44%;
        }
        
        .activity-input {
            width: 100%;
            border: none;
            outline: none;
            padding: 3px;
            font-size: 12px;
            background: transparent;
            resize: vertical;
            min-height: 20px;
        }
        
        .obs-input {
            width: 100%;
            border: none;
            outline: none;
            padding: 3px;
            font-size: 12px;
            background: transparent;
            resize: vertical;
            min-height: 25px;
        }
        
        .checkbox-input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .add-button-section {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .add-row-btn {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .add-row-btn:hover {
            background-color: #218838;
        }
        
        .signature-section {
            margin-top: 40px;
            text-align: center;
        }
        
        .signature-input {
            width: 300px;
            height: 40px;
            border: none;
            border-bottom: 1px solid #000;
            text-align: center;
            font-size: 14px;
            outline: none;
            background: transparent;
        }
        
        .signature-input:focus {
            border-bottom: 2px solid #0066cc;
        }
        
        .buttons-section {
            margin-top: 30px;
            text-align: center;
            gap: 15px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }
        
        .btn-primary {
            background-color: #0066cc;
            color: white;
        }
        
        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        
        .btn-success {
            background-color: #28a745;
            color: white;
        }
        
        .btn-drive {
            background-color: #4285f4;
            color: white;
        }
        
        .btn:hover {
            opacity: 0.8;
        }
        
        @media print {
            body { margin: 0; padding: 15px; }
            .buttons-section, .nav-header, .add-button-section { display: none; }
            .section-title { page-break-inside: avoid; }
            .work-table { page-break-inside: auto; }
            .work-table tr { page-break-inside: avoid; }
            input, textarea { border: none !important; }
        }
        
        .no-print {
            display: block;
        }
        
        @media print {
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="nav-header no-print">
        <a href="index.html" class="back-btn">‚Üê Volver al inicio</a>
        <h2>üîß Formato de Trabajo T√©cnico</h2>
    </div>

    <div class="header-section">
        <div class="header-field">
            <label>Proyecto:</label>
            <input type="text" class="header-input" id="proyecto" placeholder="Escriba el nombre del proyecto">
        </div>
        <div class="header-field">
            <label>Unidad M√≥vil:</label>
            <input type="text" class="header-input" id="unidad-movil" placeholder="Escriba la unidad m√≥vil">
        </div>
        <div class="header-field">
            <label>Fecha:</label>
            <input type="date" class="header-input" id="fecha">
        </div>
        <div class="header-field">
            <label>Responsable:</label>
            <input type="text" class="header-input" id="responsable" placeholder="Escriba el nombre del responsable">
        </div>
    </div>

    <!-- SEGURIDAD -->
    <div class="section-title">--- SEGURIDAD ---</div>
    <table class="work-table" id="tabla-seguridad">
        <thead>
            <tr>
                <th class="activity-col">Actividad</th>
                <th class="check-col">1T</th>
                <th class="check-col">2T</th>
                <th class="obs-col">Observaciones</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
        </tbody>
    </table>
    <div class="add-button-section no-print">
        <button class="add-row-btn" onclick="addRow('seguridad')">‚ûï Agregar fila</button>
    </div>

    <!-- DESMONTAJE -->
    <div class="section-title">--- DESMONTAJE ---</div>
    <table class="work-table" id="tabla-desmontaje">
        <thead>
            <tr>
                <th class="activity-col">Actividad</th>
                <th class="check-col">1T</th>
                <th class="check-col">2T</th>
                <th class="obs-col">Observaciones</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
        </tbody>
    </table>
    <div class="add-button-section no-print">
        <button class="add-row-btn" onclick="addRow('desmontaje')">‚ûï Agregar fila</button>
    </div>

    <!-- ANTENA -->
    <div class="section-title">--- ANTENA ---</div>
    <table class="work-table" id="tabla-antena">
        <thead>
            <tr>
                <th class="activity-col">Actividad</th>
                <th class="check-col">1T</th>
                <th class="check-col">2T</th>
                <th class="obs-col">Observaciones</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
        </tbody>
    </table>
    <div class="add-button-section no-print">
        <button class="add-row-btn" onclick="addRow('antena')">‚ûï Agregar fila</button>
    </div>

    <!-- RAMAL DE ALIMENTACI√ìN Y SE√ëALES -->
    <div class="section-title">--- RAMAL DE ALIMENTACI√ìN Y SE√ëALES ---</div>
    <table class="work-table" id="tabla-ramal">
        <thead>
            <tr>
                <th class="activity-col">Actividad</th>
                <th class="check-col">1T</th>
                <th class="check-col">2T</th>
                <th class="obs-col">Observaciones</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
        </tbody>
    </table>
    <div class="add-button-section no-print">
        <button class="add-row-btn" onclick="addRow('ramal')">‚ûï Agregar fila</button>
    </div>

    <!-- SOPORTE DE JUNCTION BOX -->
    <div class="section-title">--- SOPORTE DE JUNCTION BOX ---</div>
    <table class="work-table" id="tabla-soporte">
        <thead>
            <tr>
                <th class="activity-col">Actividad</th>
                <th class="check-col">1T</th>
                <th class="check-col">2T</th>
                <th class="obs-col">Observaciones</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
        </tbody>
    </table>
    <div class="add-button-section no-print">
        <button class="add-row-btn" onclick="addRow('soporte')">‚ûï Agregar fila</button>
    </div>

    <!-- VALIDACI√ìN -->
    <div class="section-title">--- VALIDACI√ìN ---</div>
    <table class="work-table" id="tabla-validacion">
        <thead>
            <tr>
                <th class="activity-col">Actividad</th>
                <th class="check-col">1T</th>
                <th class="check-col">2T</th>
                <th class="obs-col">Observaciones</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
            <tr>
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            </tr>
        </tbody>
    </table>
    <div class="add-button-section no-print">
        <button class="add-row-btn" onclick="addRow('validacion')">‚ûï Agregar fila</button>
    </div>

    <!-- FIRMA -->
    <div class="signature-section">
        <input type="text" class="signature-input" placeholder="Firma del Responsable">
        <p><strong>Firma del Responsable</strong></p>
    </div>

    <!-- BOTONES -->
    <div class="buttons-section no-print">
        <button class="btn btn-primary" onclick="window.print()">üìÑ Descargar PDF</button>
        <button class="btn btn-secondary" onclick="clearForm()">üóëÔ∏è Limpiar Formulario</button>
        <button class="btn btn-success" onclick="fillSample()">üìù Llenar Ejemplo</button>
        <button class="btn btn-drive" onclick="saveToGoogleDrive()">üíæ Guardar en Drive</button>
    </div>

    <script>
        function addRow(seccion) {
            const tabla = document.getElementById(`tabla-${seccion}`);
            const tbody = tabla.querySelector('tbody');
            
            const nuevaFila = tbody.insertRow();
            nuevaFila.innerHTML = `
                <td><textarea class="activity-input" placeholder="Descripci√≥n de la actividad"></textarea></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td class="check-col"><input type="checkbox" class="checkbox-input"></td>
                <td><textarea class="obs-input" placeholder="Observaciones"></textarea></td>
            `;
        }

        function clearForm() {
            document.getElementById('proyecto').value = '';
            document.getElementById('unidad-movil').value = '';
            document.getElementById('fecha').value = '';
            document.getElementById('responsable').value = '';
            
            const activityInputs = document.querySelectorAll('.activity-input');
            const obsInputs = document.querySelectorAll('.obs-input');
            const checkboxes = document.querySelectorAll('.checkbox-input');
            const signatureInput = document.querySelector('.signature-input');
            
            activityInputs.forEach(input => input.value = '');
            obsInputs.forEach(input => input.value = '');
            checkboxes.forEach(checkbox => checkbox.checked = false);
            signatureInput.value = '';
            
            alert('Formulario limpiado correctamente');
        }

        function fillSample() {
            document.getElementById('proyecto').value = 'Proyecto Telecomunicaciones XYZ';
            document.getElementById('unidad-movil').value = 'UM-001';
            document.getElementById('fecha').value = '2025-09-25';
            document.getElementById('responsable').value = 'Juan P√©rez';
            
            const activities = [
                'Verificar EPP completo',
                'Revisar herramientas',
                'Inspecci√≥n visual del equipo'
            ];
            
            const observations = [
                'Todo en orden',
                'Revisar casco',
                'Equipo en buen estado'
            ];
            
            const activityInputs = document.querySelectorAll('.activity-input');
            const obsInputs = document.querySelectorAll('.obs-input');
            
            activities.forEach((activity, index) => {
                if (activityInputs[index]) {
                    activityInputs[index].value = activity;
                }
            });
            
            observations.forEach((obs, index) => {
                if (obsInputs[index]) {
                    obsInputs[index].value = obs;
                }
            });
            
            document.querySelector('.signature-input').value = 'Juan P√©rez';
            alert('Formulario rellenado con datos de ejemplo');
        }

        function saveToGoogleDrive() {
            const fecha = document.getElementById('fecha').value || new Date().toISOString().split('T')[0];
            const proyecto = document.getElementById('proyecto').value || 'Proyecto';
            const responsable = document.getElementById('responsable').value || 'Responsable';
            const fileName = `Formato_Trabajo_${proyecto}_${responsable}_${fecha}.txt`;
            
            let contenido = `FORMATO DE TRABAJO T√âCNICO\n`;
            contenido += `========================================\n\n`;
            
            contenido += `INFORMACI√ìN GENERAL:\n`;
            contenido += `- Proyecto: ${document.getElementById('proyecto').value}\n`;
            contenido += `- Unidad M√≥vil: ${document.getElementById('unidad-movil').value}\n`;
            contenido += `- Fecha: ${document.getElementById('fecha').value}\n`;
            contenido += `- Responsable: ${document.getElementById('responsable').value}\n\n`;
            
            function procesarSeccion(titulo, tablaId) {
                contenido += `${titulo}\n`;
                contenido += `${'='.repeat(titulo.length)}\n`;
                
                const tabla = document.getElementById(tablaId);
                const filas = tabla.querySelectorAll('tbody tr');
                
                let actividadNum = 1;
                filas.forEach(fila => {
                    const actividad = fila.querySelector('.activity-input').value.trim();
                    const check1T = fila.querySelectorAll('.checkbox-input')[0].checked;
                    const check2T = fila.querySelectorAll('.checkbox-input')[1].checked;
                    const observaciones = fila.querySelector('.obs-input').value.trim();
                    
                    if (actividad) {
                        contenido += `\n${actividadNum}. ${actividad}\n`;
                        contenido += `   - 1T: ${check1T ? 'Completado ‚úì' : 'Pendiente ‚úó'}\n`;
                        contenido += `   - 2T: ${check2T ? 'Completado ‚úì' : 'Pendiente ‚úó'}\n`;
                        if (observaciones) {
                            contenido += `   - Observaciones: ${observaciones}\n`;
                        }
                        actividadNum++;
                    }
                });
                contenido += `\n`;
            }
            
            procesarSeccion('SEGURIDAD', 'tabla-seguridad');
            procesarSeccion('DESMONTAJE', 'tabla-desmontaje');
            procesarSeccion('ANTENA', 'tabla-antena');
            procesarSeccion('RAMAL DE ALIMENTACI√ìN Y SE√ëALES', 'tabla-ramal');
            procesarSeccion('SOPORTE DE JUNCTION BOX', 'tabla-soporte');
            procesarSeccion('VALIDACI√ìN', 'tabla-validacion');
            
            const firma = document.querySelector('.signature-input').value.trim();
            if (firma) {
                contenido += `FIRMA DEL RESPONSABLE: ${firma}\n`;
            }
            
            contenido += `\nFecha de generaci√≥n: ${new Date().toLocaleString()}\n`;
            
            const blob = new Blob([contenido], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = fileName;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert(`Archivo descargado como: ${fileName}\n\nPara subirlo a Google Drive:\n1. Ve a drive.google.com\n2. Haz clic en "Nuevo"\n3. Selecciona "Subir archivo"\n4. Busca el archivo descargado\n\n¬°O simplemente arrastra el archivo a tu Drive!`);
        }

        // Auto-resize textareas
        document.addEventListener('input', function(e) {
            if (e.target.classList.contains('activity-input') || e.target.classList.contains('obs-input')) {
                e.target.style.height = 'auto';
                e.target.style.height = e.target.scrollHeight + 'px';
            }
        });
    </script>
</body>
</html>
